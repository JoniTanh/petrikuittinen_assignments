<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Password Validation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
			.valid {color: black;}
			.error {color: red;}
		</style>
	<script>
		function validate(event) {
			var errors = [];
			let password1 = document.getElementById("password1").value;
			let password2 = document.getElementById("password2").value;
			if (password1 != password2) {
				errors.push("Passwords don't match");
			}
			if (!/^[ -~]{8,20}$/.test(password1)) {
				errors.push("Password must be 8-20 ASCII characters.");
			}
			let message = "Passwords ok";
			if (errors.length > 0) {
				message = errors.join("\n");
			}
			var elem = document.getElementById("error_message");
			elem.className = errors.length > 0 ? "error": "valid";
			elem.innerText = message;
			// if (errors.length == 0) return true;
			event.preventDefault();
			return false;
		}
	</script>
    </head>
	<body>
		<p id="error_message" class="valid"></p>
		<form action="" onsubmit="validate(event)">
	    <label for="password1">Your password:</label>
	    <input type="password" size="20" id="password1" name="password1">
	    <br>
	    <label for="password2">Your password repeated:</label>
	    <input type="password" size="20" id="password2" name="password2">
	    <br>
	    <input type="submit" value="Validate">
	</form>
</body>
</html>
